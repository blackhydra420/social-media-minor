<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/index.css">

    <script src="https://kit.fontawesome.com/cdf493be5b.js" crossorigin="anonymous"></script>

    <title>PieChat</title>

    <!-- preloader css -->
    <style>
      #preloader{
        background: #1d1e22;
        width:100%;
        height:100vh;
        margin:0;
        display: block;
      }
      svg{
        width: 100px;
        height: 100px;
        margin: 20px;
        display:inline-block;
        position: fixed;
        top:50%;
        left:50%;
        transform: translate(-50%,-50%);
      }
    </style>
</head>
<body>
    <!-- preloader -->
    <div id="preloader">
      <svg version="1.1" id="L7" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">
       <path fill="#fff" d="M31.6,3.5C5.9,13.6-6.6,42.7,3.5,68.4c10.1,25.7,39.2,38.3,64.9,28.1l-3.1-7.9c-21.3,8.4-45.4-2-53.8-23.3
        c-8.4-21.3,2-45.4,23.3-53.8L31.6,3.5z">
            <animateTransform 
               attributeName="transform" 
               attributeType="XML" 
               type="rotate"
               dur="2s" 
               from="0 50 50"
               to="-360 50 50" 
               repeatCount="indefinite" />
        </path>
       <path fill="#fff" d="M42.3,39.6c5.7-4.3,13.9-3.1,18.1,2.7c4.3,5.7,3.1,13.9-2.7,18.1l4.1,5.5c8.8-6.5,10.6-19,4.1-27.7
        c-6.5-8.8-19-10.6-27.7-4.1L42.3,39.6z">
            <animateTransform 
               attributeName="transform" 
               attributeType="XML" 
               type="rotate"
               dur="1s" 
               from="0 50 50"
               to="-360 50 50" 
               repeatCount="indefinite" />
        </path>
       <path fill="#fff" d="M82,35.7C74.1,18,53.4,10.1,35.7,18S10.1,46.6,18,64.3l7.6-3.4c-6-13.5,0-29.3,13.5-35.3s29.3,0,35.3,13.5
        L82,35.7z">
            <animateTransform 
               attributeName="transform" 
               attributeType="XML" 
               type="rotate"
               dur="2s" 
               from="0 50 50"
               to="360 50 50" 
               repeatCount="indefinite" />
        </path>
      </svg>
      </div>

    <!-- Login form -->
    <div id="loginContainer" class="container-fluid" style="height: 100vh; display: none; flex-direction: column; justify-content: center;">
      <div class="container shadow-lg rounded" style="width: 500px; padding: 20px;">
          <h1>Login</h1>
          <form id="loginForm">
              <div class="form-group">
                <label for="user_email">Email address</label>
                <input type="email" class="form-control" id="user_email" aria-describedby="emailHelp" placeholder="Enter email">
                <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
              </div>
              <div class="form-group">
                <label for="user_pass">Password</label>
                <input type="password" class="form-control" id="user_pass" placeholder="Password">
              </div>
              <button type="submit" class="btn btn-primary">Login</button>
              <small class="form-text text-muted">Forgot password? <span class="extra_link" data-toggle="modal" data-target="#resetPassModal">reset</span> or New user? <span class="extra_link" onclick="loadForm()">Signup</span></small>
            </form>
      </div>
    </div>

    <!-- password reset modal -->
    <div class="modal" id="resetPassModal">
      <div class="modal-dialog">
        <div class="modal-content">
    
          <!-- Modal Header -->
          <div class="modal-header">
            <h3 class="modal-title">Reset Password</h3>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>
    
          <!-- Modal body -->
          <div class="modal-body">
            <form id="resetPass">
              <div class="form-group">
                <label for="resetEmail">Email</label>
                <input type="email" class="form-control" id="resetEmail" placeholder="Your Email" required>
              </div>
              <button type="submit" class="btn btn-primary">Reset password</button>
            </form>
          </div>
    
          <!-- Modal footer -->
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
          </div>
    
        </div>
      </div>
    </div>

    <!-- Signup form -->
    <div id="signupContainer" class="container-fluid" style="height: 100vh; display: none; flex-direction: column; justify-content: center;">
        <div class="container shadow-lg rounded" style="width: 500px; padding: 20px;">
            <h1>Signup</h1>
              <form id="signupForm">
                <div class="form-group">
                  <label for="user_create_email">Email address</label>
                  <input type="email" class="form-control" id="user_create_email" aria-describedby="emailHelp" placeholder="Enter email">
                  <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
                </div>
                <div class="form-group">
                  <label for="user_create_email">Display name</label>
                  <input type="text" class="form-control" id="user_create_dn"  placeholder="Enter display name" required>
                  <small id="dnHelp" class="form-text text-muted">Username will be shown to others and cannot be changed again.</small>
                </div>
                <div class="form-group">
                  <label for="user_create_pass">Password</label>
                  <input type="password" class="form-control" id="user_create_pass" placeholder="Password" >
                </div>
                <div class="form-group">
                    <label for="user_con_pass">Confirm password</label>
                    <input type="password" class="form-control" id="user_con_pass" placeholder="Confirm password" required>
                </div>
                <button type="submit" class="btn btn-primary">Signup</button>
                <small class="form-text text-muted">Already have an account? <span class="extra_link" onclick="loadForm()">Login</span></small>
              </form>
        </div>
      </div>

     <!-- Email verification tab -->
     <div id="vContainer" class="container-fluid" style="height: 100vh; display: none; flex-direction: column; justify-content: center;">
      <div class="container shadow-lg rounded" style="width: 500px; padding: 20px;">
        <h5>Please verify your email to login.</h5>
        <small class="form-text text-muted" id="vText" style="display: none;">Verification email has been sent to your email. If you didn't recieve the email click on resend after <span id="vTimer">1:30</span>. <br>If <span id="userEmail" style="color:blue;"></span> isn't your email change it <a class="extra_link" data-toggle="modal" data-target="#changeEmailModal">here</a>.</small><br>
        <button class="btn btn-primary" id="vButton">Verify</button>
      </div>
     </div>
    
     <!-- notification panel -->   
      <div class="shadow-lg" id="ntf_panel" style="display: none;">
        <ul style="list-style: none; max-height: 60vh; overflow: auto; z-index: 9;" class="notifications" id="ntf_panel_ul">
        </ul>
      </div>
      
      <!-- <button onclick="sendFrndRequest()">send request</button>
      <button onclick="deleteFrndRequest('eh0SdFphcDJGvVRKUD8K')">delete request</button> -->

      <!-- User Profile -->
      <div class="modal" id="userProfile">
        <div class="modal-dialog">
          <div class="modal-content">
      
            <!-- Modal Header -->
            <div class="modal-header">
              <h3 class="modal-title">User's profile</h3>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
      
            <!-- Modal body -->
            <div class="modal-body">
              Email: <span id="displayEmail"></span> <br>
              Username: <span id="displayUsername"></span>  <br>
              <br>
               <button data-dismiss="modal" data-toggle="modal" data-target="#changePassModal" class="btn btn-success">Change password</button>
               <button data-dismiss="modal" data-toggle="modal" data-target="#changeEmailModal" class="btn btn-success">Change Email</button>
            </div>
      
            <!-- Modal footer -->
            <div class="modal-footer">
              <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
      
          </div>
        </div>
      </div>

      <!-- password changing model -->
      <div class="modal" id="changePassModal">
        <div class="modal-dialog">
          <div class="modal-content">
      
            <!-- Modal Header -->
            <div class="modal-header">
              <h3 class="modal-title">Change Password</h3>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
      
            <!-- Modal body -->
            <div class="modal-body">
              <form id="changePass">
                <div class="form-group">
                  <label for="user_old_pass">Old password</label>
                  <input type="password" class="form-control" id="user_old_pass" placeholder="Old password" required>
                </div>
                <div class="form-group">
                  <label for="user_new_pass">New password</label>
                  <input type="password" class="form-control" id="user_new_pass" placeholder="New password" >
                </div>
                <div class="form-group">
                    <label for="user_renew_pass">Retype new password</label>
                    <input type="password" class="form-control" id="user_renew_pass" placeholder="Retype new password">
                </div>
                <button type="submit" class="btn btn-primary">Change password</button>
                <div id="changePassSpinner" class="spinner-border text-primary" style="display: none;"></div>
              </form>
            </div>
      
            <!-- Modal footer -->
            <div class="modal-footer">
              <button type="button" class="btn btn-danger" data-dismiss="modal" data-toggle="modal" data-target="#userProfile">Back</button>
            </div>
      
          </div>
        </div>
      </div>

      <!-- Email changing model -->
      <div class="modal" id="changeEmailModal">
        <div class="modal-dialog">
          <div class="modal-content">
      
            <!-- Modal Header -->
            <div class="modal-header">
              <h3 class="modal-title">Change Email</h3>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
      
            <!-- Modal body -->
            <div class="modal-body">
              <form id="changeEmail">
                <div class="form-group">
                  <label for="user_email_pass">Password</label>
                  <input type="password" class="form-control" id="user_email_pass" placeholder="Password" required>
                </div>
                <div class="form-group">
                    <label for="user_new_email">New email</label>
                    <input type="email" class="form-control" id="user_new_email" placeholder="New email" required>
                </div>
                <button type="submit" class="btn btn-primary">Change email</button>
                <div id="changeEmailSpinner" class="spinner-border text-primary" style="display: none;"></div>
              </form>
            </div>
      
            <!-- Modal footer -->
            <div class="modal-footer" id="emailChangeModalFooter">
              <button type="button" class="btn btn-danger" data-dismiss="modal" data-toggle="modal" data-target="#userProfile">Back</button>
            </div>
      
          </div>
        </div>
      </div>

      <!-- File uploading modal -->
      <div class="modal" id="fileUploadingModal">
        <div class="modal-dialog">
          <div class="modal-content">
      
            <!-- Modal Header -->
            <div class="modal-header">
              <h3 class="modal-title">Upload file</h3>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
      
            <!-- Modal body -->
            <div class="modal-body">
              <form id="fileUpload" method="POST">
                <div class="form-group">
                  <input type="file" name="fileUploadInput" id="fileUploadInput">
                  <div id="fileContainer">
                    <p id="fileList"></p>
                  </div>
                </div>
                <button type="submit" class="btn btn-primary">Upload</button>
              </form><br> 
              <p id="uploadStatus"></p>
              <div class="progress" id="progressBar">
                <div class="progress-bar progress-bar-striped progress-bar-animated" id="uploadProgress" role="progressbar" style="width: 0"></div>
              </div>
            </div>
      
            <!-- Modal footer -->
            <div class="modal-footer" id="fileUploadingModalFooter">
              <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
      
          </div>
        </div>
      </div>

    <!-- main chatbox -->
    <div id="after_login">
      <div id="chatbox" class="container-fluid">
        <div class="mainNav">
          <img src="assets/images/swlog.png" alt="brand logo" id="brandLogo">
          <a class="float-right" id="logout" data-toggle="tooltip" data-placement="bottom" title="LogOut"><i class="fas fa-sign-out-alt info-buttons"></i></a>
          <a class="float-right" id="notification" data-toggle="tooltip" data-placement="left" title="Notifications!"><i id="bell" class="far fa-bell info-buttons"></i></a>
        </div>
        <div class="row boxWithoutNav">
            <div class='col-3 no-pad'>
                <div><h4 class="topic-heading" id="user-info" data-toggle="modal" data-target="#userProfile" style="cursor: pointer">Your info</h4></div>

              <!-- search bar -->
              
                <form class="search" id="searchBar">
                  <span class="searchInputBox">
                    <input type="text" placeholder="Enter email id of the user" name="search" id="searchInput">
                  </span>
                    <button type="submit"><i class="fa fa-search"></i></button>
                </form>

                <!-- friendlist -->
                <ul style="list-style: none;" class="friend-list" id="firend_list">
                    
                </ul>
            </div>
            <div class='col-9 no-pad' id="main_box">

              <!-- <h4 class="topic-heading">Result</h4>
              <div class="container" style="display: flex; flex-direction: column; justify-content: center; height: calc(100% - 58px);">
                  <div class="card shadow" style="width: 18rem; margin: auto;">
                      <img src="assets/images/default-profile.png" class="card-img-top" alt="...">
                      <div class="card-body">
                        <h5 class="card-title">prince@gmail.com</h5>
                        <button class="btn btn-info disabled">send request</button>
                      </div>
                    </div>
              </div> -->

              <!-- <h4 class="topic-heading">Result</h4>
              <div class="container" style="display: flex; flex-direction: column; justify-content: center; height: calc(100% - 58px);">
                  <h3 style="text-align: center;"><i class="fa fa-search"></i> no search result</h3>
              </div> -->

                 <!-- <h4 class='topic-heading' id="current-chatter">Name of the person</h4>
                <ul style="list-style: none; max-height: 75vh; overflow:auto" class="chat">
                   
                </ul>
                <form class="message-sending">
                    <input style="width: calc(100% - 29px);" id="m"  autocomplete="off" required/>
                  <button class="btn btn-primary"><i class="fas fa-paper-plane"></i></button>
                </form> -->
            </div>

        </div>

      </div>
    </div>

    <div id="alertBox">
      <h5 id="alertHeading">Alert</h5>
      <p id="alertBody"></p>
      <h5 id="alertButton">OK</h5>
    </div>
    <div id="alertBlur"></div>

    <!-- Toast templates -->
    <div class="toast" id="emailChangeToast" style="position: absolute; bottom: 20px; right: 20px; z-index: 99;">
      <div class="toast-header">
          <strong class="mr-auto">Email has changed</strong>
          <button type="button" class="ml-2 mb-1 close" data-dismiss="toast">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <div class="toast-body">
          <div>Your Email has been updated.</div>
      </div>
    </div>
</body>

<!-- bootstrap js libraries -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.2.1/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.2.1/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-storage.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.2.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.2.1/firebase-firestore.js"></script>

<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyBVvwZSyn23XyJXHT1hvsghCpiphegoqrQ",
    authDomain: "social-media-31bce.firebaseapp.com",
    databaseURL: "https://social-media-31bce.firebaseio.com",
    projectId: "social-media-31bce",
    storageBucket: "social-media-31bce.appspot.com",
    messagingSenderId: "308617471624",
    appId: "1:308617471624:web:5865e63339515ea0d6613d",
    measurementId: "G-MTELXP8MF4"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
</script>

<!-- authorization script -->
<script src="assets/scripts/auth.js"></script>

<!-- DOM manipulation scripts -->
<script src="assets/scripts/index.js"></script>

<!-- preloader script -->
<script>
  window.onload = function () { document.getElementById("preloader").style.display = 'none'; };
</script>
</html>